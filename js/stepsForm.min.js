!function(t){"use strict";const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],s=Modernizr.csstransitions;function i(t,e){for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function n(t,e){this.$el=t,this.options=i({},this.options),i(this.options,e),this._init()}n.prototype.options={onSubmit:function(){return!1}},n.prototype._init=function(){this.current=0,this.$questions=$("ol.questions > li"),this.questionsCount=this.$questions.length,this.$questions.first().addClass("current"),this.$ctrlNext=this.$el.find("button.next"),this.$progress=this.$el.find("div.progress"),this.$questionStatus=this.$el.find("span.number"),this.$currentNum=this.$questionStatus.find("span.number-current"),this.$currentNum.html(Number(this.current+1).toString()),this.$totalQuestionNum=this.$questionStatus.find("span.number-total"),this.$totalQuestionNum.html(this.questionsCount),this.$error=this.$el.find("span.error-message"),this._initEvents()},n.prototype._initEvents=function(){let t=this,e=this.$questions.eq(this.current).find("input, textarea"),s=function(){e.off("focus",s),t.$ctrlNext.addClass("show")};e.on("focus",s),this.$ctrlNext.on("click",function(e){e.preventDefault(),t._nextQuestion()}),$(document).on("keydown",function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),0===t.$el.find("li.current").find("textarea").length&&t._nextQuestion())}),this.$el.on("keydown",function(t){9===(t.keyCode||t.which)&&t.preventDefault()})},n.prototype._nextQuestion=function(){if(!this._validate())return!1;this.current===this.questionsCount-1&&(this.isFilled=!0),this._clearError();let t=this.$questions.eq(this.current);++this.current,this._progress(),this.isFilled||(this._updateQuestionNumber(),this.$el.addClass("show-next"),this.$nextQuestion=this.$questions.eq(this.current),t.removeClass("current"),this.$nextQuestion.addClass("current"),this.$el.find("ol.questions").toggleClass("textarea",0!==this.$nextQuestion.find("textarea").length));let i=this,n=function(){s&&this.removeEventListener(e,n),i.isFilled?i._submit():(i.$el.removeClass("show-next"),i.$currentNum.html(i.$nextQuestionNum.html()),i.$nextQuestionNum.remove(),i.$nextQuestion.find("input, textarea").trigger("focus"))};s?this.$progress.on(e,n):n()},n.prototype._progress=function(){this.$progress.css("width",this.current*(100/this.questionsCount)+"%")},n.prototype._updateQuestionNumber=function(){this.$nextQuestionNum=$("<span>"),this.$nextQuestionNum.addClass("number-next").html(Number(this.current+1).toString()),this.$questionStatus.append(this.$nextQuestionNum)},n.prototype._submit=function(){this.options.onSubmit(this.$el.get(0))},n.prototype._validate=function(){let t,e,s=this.$questions.eq(this.current).find("input, textarea"),i=s.val(),n=s.attr("type"),o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=/^(0[1-68])(?:[ _.-]?(\d{2})){4}$/;if(""===i)return this._showError("EMPTY_STR"),!1;switch(n){case"text":t=""!==i,e="EMPTY_STR";break;case"email":t=o.test(i),e="INVALID_EMAIL";break;case"tel":t=r.test(i),e="INVALID_TEL";break;default:t=""!==i,e="EMPTY_STR"}return t||this._showError(e),t},n.prototype._showError=function(t){let e="";switch(t){case"EMPTY_STR":e="Please fill the field before continuing";break;case"INVALID_EMAIL":e="Please fill a valid email address";break;case"INVALID_TEL":e="Please fill a valid phone number"}this.$error.html(e).addClass("show")},n.prototype._clearError=function(){this.$error.removeClass("show")},t.StepsForm=n}(window);
